/**
 * @file js templete
 * @author xucaiyu
 * @email 569455187@qq.com
 * @version 1.0.0
 * @date 2014-11-26
 * @license MIT License 
 */
!function(){var e={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},n={},t=function(n){return e[n]},r=function(e){return"string"!=typeof e?e:e.replace(/[&<>"']+/gim,t)},a=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},o=function(e,n,t,r){var o=n,i=t;if(a(e))for(;i>o;o++)r.call(e,e[o],o,e);else for(o in e)r.call(e,e[o],o)},i=function(e){var n=typeof e;if("string"===n)return e.length;if("object"===n){var t=0;for(var r in e)t++;return t}return!1},s={escape:r,each:o,count:i},c=function(e){this._parse(e)};c.tags={langOpen:"{{",langClose:"}}",varOpen:"\\${",varClose:"}",escapeOpen:"\\$\\${",escapeClose:"}",commentOpen:"\\{#",commentClose:"\\}"},c.statement={"if":function(e){return"if("+e+"){"},"else if":function(e){return"}else if("+e+"){"},"else":function(){return"}else{"},"/if":function(){return"}"},"for":function(e,n){var t="",r=n&&n.split(",")[0];return t=n&&/[a-z]+/gim.test(r)?"_each_("+e+",0,data.length,function("+n+"){":n&&/\d+/.test(r)?"_each_([],"+n+",function(_value,"+e+"){":"_each_("+e+",function(_value,_index){"},"/for":function(){return"});"},log:function(e){return"console.log("+e+");"}},c.pt=c.prototype,c.pt._compile=function(e){var n,t="\\s*(\\/?\\w+(?:\\s*if)?)\\s*(?:([^\\"+c.tags.langClose+"\\(]*)(?:\\(([\\d\\w,]*)\\))?)\\s*",r=c.tags.langOpen+t+c.tags.langClose,a=c.tags.varOpen+"([\\s\\S]+?)"+c.tags.varClose,o=c.tags.escapeOpen+"([\\s\\S]+?)"+c.tags.escapeClose,i=new RegExp(r,"igm"),s=new RegExp(a,"igm"),u=new RegExp(o,"igm");return n=e.replace(i,function(e,n,t,r){var a=c.statement[n];if(!a)throw"Unknown template tag: "+n;return"'; "+a(t,r)+" _str+='"}).replace(s,function(e,n){return"'+_escape_("+n+")+'"}).replace(u,function(e,n){return"'+"+n+"+'"}).replace(/[\r\t\n]/g,""),n="var _str = '',_escape_=units.escape,_each_=units.each; with(data){ _str+='"+n+"'}; return new String(_str);"},c.pt._parse=function(e){if(n[e])var t=n[e];else{var t=this._compile(e);n[e]=t}try{this._tpl=new Function("data, units",t)}catch(r){throw r}return this},c.pt.render=function(e){var n=this._tpl(e,s).replace(/(^\s*)|(\s*$)/g,"");return n};var u=function(e,n){if("string"!=typeof e)throw"Template not found";var t=new c(e,n);return void 0===n?t:t.render(n)};"function"==typeof define?define(function(){return u}):"undefined"!=typeof exports?module.exports=u:window.fasTpl=u}();