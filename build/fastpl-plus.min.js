/**
 * @file js template
 * @author xucaiyu
 * @email 569455187@qq.com
 * @version 4.0
 * @date 2015-10-09
 * @license MIT License 
 */
!function(){function _logical_(e){return e}var escapeHash={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},_cache={},escapeFn=function(e){return escapeHash[e]},_escape_=function(e){return"string"!=typeof e?e:e.replace(/[&<>"'\/]/gim,escapeFn)},isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},_each_=function(e,t,n,r){var a,o;if(isArray(e))for(a=t,o=n;o>a;a++)r.call(e,e[a],a,e);else for(a in e)r.call(e,e[a],a)},count=function(e){var t=typeof e;if("string"===t)return e.length;if("object"===t){var n=0;for(var r in e)n++;return n}return!1},fasTpl=function(e,t){if("string"!=typeof e)throw"Template not found";var n=fasTpl._parse.call(fasTpl,e);return void 0===t?n:n.render(t)},tools={_escape_:_escape_,_each_:_each_,_logical_:_logical_,count:count};fasTpl.tools=function(e,t){if("object"==typeof e)for(var n in e)tools[n]=e[n];else tools[e]=t},fasTpl.getTools=function(){return tools},fasTpl.tags={langOpen:"{{",langClose:"}}",varOpen:"\\${",varClose:"}",commentOpen:"{!--",commentClose:"--}"},fasTpl.version="4.0",fasTpl.uid="1",fasTpl.statement={"var":function(e){return"var "+e+";\r\n"},"if":function(e){return"if("+e+"){\r\n"},"else if":function(e){return"}else if("+e+"){\r\n"},"else":function(e){return"}else{\r\n"},"/if":function(e){return"}\r\n"},"for":function(e){var t,n,r="",a=e.replace(/\s/g,""),o=a.split("("),l=o[0],s=o[1]?o[1]:"";if(!e)throw"{{for}}: is not arguments";return""===s?r="_each_("+l+",0,"+l+".length,function(v, i){":""!==s?(t=s.split(")")[0].split(","),n=/\d+/.test(t[0])||/\d+/.test(t[1]),r=n?"_each_([],"+t+",function(data,"+(l?l:"i")+"){":"_each_("+l+",0,"+l+".length,function("+t+"){"):r="for"+a,"\r\n"+r+"\r\n"},"/for":function(e){return"\r\n});\r\n"},log:function(e){return"console.log("+e+");\r\n"}},fasTpl._compile=function(e){function t(e){var t;e&&!_[e]&&(t="_data."+e,g+=e+"="+t+",\r\n",_[e]=!0)}var n,r="\\s*(\\/?\\w+(?:\\s*if)?)\\s*([^"+fasTpl.tags.langClose+"]*)",a=fasTpl.tags.langOpen+"literal"+fasTpl.tags.langClose+"([\\s\\S]*)"+fasTpl.tags.langOpen+"/literal"+fasTpl.tags.langClose,o=fasTpl.tags.langOpen+r+fasTpl.tags.langClose,l=fasTpl.tags.varOpen+"([=\\s]?)([^\\|]+?)\\s*(?:(\\|+)([\\s\\S]+?))?"+fasTpl.tags.varClose,s=fasTpl.tags.commentOpen+"[\\s\\S]*"+fasTpl.tags.commentClose,i=(new RegExp(fasTpl.tags.langClose+"(')"+fasTpl.tags.langOpen,"igm"),new RegExp(a,"igm")),c=new RegExp(o,"igm"),f=new RegExp(l,"igm"),p=new RegExp(s,"igm"),g="var _tools_=_tools,\r\n_escape_=_tools_._escape_,\r\n_each_=_tools_._each_,\r\n_logical_=_tools_._logical_,\r\n",u="",_={};return n=e.replace(/'/gim,"\\'").replace(/[\r\t\n]/g,"").replace(p,"").replace(i,function(e,t){var n="_literal_"+fasTpl.uid++;return g+=n+"='"+t+"',","';\r\n_str+="+n+"+'"}).replace(c,function(e,t,n){var r=fasTpl.statement[t];if(!r)throw"Unknown template tag: "+t;return"'; "+r(n).replace(/\\'/gim,"'")+"_str+='"}).replace(f,function(e,n,r,a,o){if(!r)throw"Unknown template tag: "+r;if(a&&"|"!==a)-1===r.indexOf(".")&&t(r),r="_logical_("+r+a+o+")";else if(a&&o){var l=o.indexOf(":"),s=o.split(":")[0].replace(/\s/g,""),i=void 0;if(-1!==l&&(i=o.slice(l+1)),!tools[s])throw"Unknown template method: "+s;r="_tools_."+s+"("+r+","+i+")"}return"="!==n&&(r="_escape_("+r+")"),"'+"+r.replace(/\\'/gim,"'")+"+'"}),u="_str = '';\r\n_str+='"+n+"';\r\nreturn new String(_str);",function(e){var t,n="";return tools._each_(e,0,0,function(e,t){n+=t+"=_data."+t+",\r\n"}),t=g+n+u,t.replace(/\_str\+\=\'\'\;/g,""),t}},fasTpl._parse=function(tpl){function render(){this._tpl=viewFn,this.render=function(data){var code;try{return code=this._tpl(data),new Function("_data, _tools",code)(data,tools).replace(/(^\s*)|(\s*$)/g,"")}catch(e){if("ReferenceError"==e.name)throw e;eval(code)}}}var viewFn;return _cache[tpl]?viewFn=_cache[tpl]:(viewFn=this._compile(tpl),_cache[tpl]=viewFn),new render},"function"==typeof define?define(function(){return fasTpl}):"undefined"!=typeof exports?module.exports=fasTpl:window.fasTpl=fasTpl}(),function(){var e=function(e,t){if(e){"string"==typeof e&&(e=e.replace(/\-/g,"/"));var n=new Date(e),r={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours()%12===0?12:n.getHours()%12,"H+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()},a={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substring(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+a[n.getDay()+""]));for(var o in r)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[o]:("00"+r[o]).substring((""+r[o]).length)));return t}},t=function(e){return e?String(e).replace(/\B(?=(?:\d{3})+$)/g,","):void 0};fasTpl.tools({date_format:e,number_format:t})}();
//# sourceMappingURL=fastpl-plus.min.js.map
