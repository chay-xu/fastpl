/**
 * @file js template
 * @author xucaiyu
 * @email 569455187@qq.com
 * @version 4.0
 * @date 2015-10-09
 * @license MIT License 
 */
!function(){function e(e){return e}var n={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},t={},r=function(e){return n[e]},o=function(e){return"string"!=typeof e?e:e.replace(/[&<>"'/]/gim,r)},a=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},i=function(e,n,t,r){var o,i;if(a(e))for(o=n,i=t;i>o;o++)r.call(e,e[o],o,e);else for(o in e)r.call(e,e[o],o)},l=function(e){var n=typeof e;if("string"===n)return e.length;if("object"===n){var t=0;for(var r in e)t++;return t}return!1},s=function(e,n){if("string"!=typeof e)throw"Template not found";var t=s._parse.call(s,e);return void 0===n?t:t.render(n)},c={_escape_:o,_each_:i,_logical_:e,count:l};s.tools=function(e,n){if("object"==typeof e)for(var t in e)c[t]=e[t];else c[e]=n},s.getTools=function(){return c},s.tags={langOpen:"{{",langClose:"}}",varOpen:"\\${",varClose:"}",commentOpen:"<!--",commentClose:"-->"},s.version="3.0",s.uid="1",s.statement={"var":function(e){return"var "+e+";"},"if":function(e){return"if("+e+"){"},"else if":function(e){return"}else if("+e+"){"},"else":function(e){return"}else{"},"/if":function(e){return"}"},"for":function(e){var n,t,r="",e=e.replace(/\s/g,""),o=e.split("("),a=o[0],i=o[1]?o[1]:"";return""===i?r="_each_("+a+",0,"+a+".length,function(v, i){":""!==i?(n=i.split(")")[0].split(","),t=/\d+/.test(n[0])||/\d+/.test(n[1]),r=t?"_each_([],"+n+",function(data,"+(a?a:"i")+"){":"_each_("+a+",0,"+a+".length,function("+n+"){"):r="for"+e,r},"/for":function(e){return"});"},log:function(e){return"console.log("+e+");"}},s._compile=function(e){function n(e){var n;e&&!m[e]&&(n=c[e]?"$tools."+e:"_data."+e,_+=e+"="+n+",",m[e]=!0)}var t,r="\\s*(\\/?\\w+(?:\\s*if)?)\\s*([^"+s.tags.langClose+"]*)",o=s.tags.langOpen+"literal"+s.tags.langClose+"([\\s\\S]*)"+s.tags.langOpen+"/literal"+s.tags.langClose,a=s.tags.langOpen+r+s.tags.langClose,i=s.tags.varOpen+"([=\\s]?)([^\\|]+?)\\s*(?:(\\|+)([\\s\\S]+?))?"+s.tags.varClose,l=s.tags.commentOpen+"[\\s\\S]*"+s.tags.commentClose,f=new RegExp(o,"igm"),u=new RegExp(a,"igm"),g=new RegExp(i,"igm"),p=new RegExp(l,"igm"),_="var _escape_=$tools._escape_,_each_=$tools._each_,_logical_=$tools._logical_,",v="",m={};return t=e.replace(/[\r\t\n]/g,"").replace(p,"").replace(f,function(e,n){var t="_literal_"+s.uid++;return _+=t+"='"+n+"',","';_str+="+t+"+'"}).replace(u,function(e,n,t){var r=s.statement[n];if(!r)throw"Unknown template tag: "+n;return"'; "+r(t)+" _str+='"}).replace(g,function(e,t,r,o,a){if(o&&"|"!==o)-1===r.indexOf(".")&&n(r),r="_logical_("+r+o+a+")";else if(a){var i=a.split(":"),l=i[0].replace(/\s/g,""),s=i[1]||void 0;r=l+"("+r+","+s+")",n(l)}return"="!==t&&(r="_escape_("+r+")"),"'+"+r+"+'"}).replace(/[\r\t\n]/g,""),v="_str = '';_str+='"+t+"'; return new String(_str);",function(e){var n,t="";return c._each_(e,0,0,function(e,n){t+=n+"=_data."+n+","}),n=_+t+v,new Function("_data, $tools",n)(e,c)}},s._parse=function(e){function n(){this._tpl=r,this.render=function(e){try{return this._tpl(e).replace(/(^\s*)|(\s*$)/g,"")}catch(n){throw n}}}var r;return t[e]?r=t[e]:(r=this._compile(e),t[e]=r),new n},"function"==typeof define?define(function(){return s}):"undefined"!=typeof exports?module.exports=s:window.fasTpl=s}();
//# sourceMappingURL=fastpl.min.js.map
